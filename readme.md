# 高频电力负荷数据分辨率感知

队伍：全世界的图尔曼联合起来

排名：10

初赛分数：0.13

复赛分数：0.1274

## 环境

Ubuntu 18.0

pytorch 1.8

显卡：2080Ti 

## 代码运行

首先把初赛的数据放在`data`文件夹下，把复赛的数据放在`data2`文件夹下

训练：

```bash
python train.py
```

其中log.txt是我目前结果最好的训练日志

测试：

```bash
python predict.py
```

## 比赛方案

#### 数据处理

将1Hz的低频数据按照滑窗的方式切分为长度为2000的片段，滑窗的步长为200。

在初赛的时候发现，原始的数据数值过大，直接训练的话网络很难收敛，所以对所有的数据进行了缩放处理，这一步在初赛的时候能使性能提高0.02左右

训练集用于训练，验证集用于筛选训练过程中最好的模型

#### 模型设计

##### 初赛

- v1：初赛的时候直接使用线性插值的方式，分数是0.17
- v2：首先将1Hz的数据上采样到5Hz，然后通过3层1维卷积进一步拟合，与真实的5Hz数据计算损失，分数0.14
- v3：输入1Hz数据，3层1维卷积+全连接层，输出5Hz数据，分数0.13

##### 复赛

- v1：为初赛v3的模型，就是把输出改成10Hz的数据，分数0.1319

- v2：采用了级联结构，首先用3conv1d+FC生成5Hz数据，再用一个同样的结构生成10Hz数据，中间的5Hz的数据：

  - 不做监督，验证集上分数0.1288
  - 用10Hz下采样到5Hz做为监督，验证集上的分数是0.1284
  - 用初赛的5Hz数据做监督验证集上是0.1280

  所以采用了第三个方案

- v3：在全连接层的后面又加了一个conv1d，用于去除预测结果的噪声，验证集上0,1273，提交0.1274

#### 损失函数

分别尝试过使用L1，L2和MAAPE 损失函数，结果相差不大，MAAPE收敛得会快一点，所以后面使用了这个损失函数
